# ROADMAP.md

> [!IMPORTANT] 
> Точка входа - root через ssh. Далее эту точку надо закрыть и сделать landing пользователя, который будет иметь доступ к ssh и я смогу залогиниться в других пользователей.
> Далее уже из него можно переходить в других пользователей.

> [!NOTE] 
> Стратегически -- каждый сервер он как машина работает одинаково с точки зрения культуры и подхода к администрированию в обращении с никсовым окружением. Будь то андроид, macOS, Linux, Raspberry Pi, Docker контейнеры и тд и тп.

> [!IMPORTANT]Основа работы с железом - подключить ssh и вообще физически  отключить клавиатуру с мышью и в идеале на софтварном уровне запретить возможность подключения к машине с помощью клавиатуры и мыши.

TODO:
- [ ] Настроить ssh доступы по ключу и закрыть доступ по паролю
- [ ] Создать landing пользователя с ограниченным доступом. В него будем приземлять ssh доступ.
- [ ] Из него уже можно переходить в других пользователей.

Задачи:
- [ ] Настроить ssh сервер на удаленной машине
- [ ] Путь к файлу конфигурации SSH сервера /etc/ssh/sshd_config
- [ ] Настройки SSH сервера
-   [ ] Отключить root доступ по паролю и разрешаем доступ только по ключам
    - [ ] Убедиться, что вы создали ключи и добавили их в файл `/home/landing/.ssh/authorized_keys`
    - [ ] Не забудьте перезапустить sshd после изменения конфигурации
- [ ] Настроить файрволл для ограничения доступа к SSH  
- [ ] Настроить SELinux/AppArmor для ограничения доступа к SSH
- [ ] Настроить Fail2Ban для защиты от брутфорс атак    
- [ ] Настроить логирование SSH для мониторинга доступа
- [ ] Настроить SSH ключи для автоматического входа ()
- [ ] Настроить SSH агента для управления ключами

Первым делом настроить ssh доступы по ключу и закрыть доступ по паролю.
Создать landing пользователя с ограниченным доступом. В него будем приземлять ssh доступ.
Из него уже можно переходить в других пользователей.

--- SSH сервер на удаленной машине ---

Путь к файлу конфигурации SSH сервера /etc/ssh/sshd_config
```shell
# Стратегически мы хотим получив генеральный ключ от машины положить в коробочку, а
# вместо использовать сертификаты для доступа к машине.
# Настройки SSH сервера
# Отключаем root доступ по паролю и разрешаем доступ только по ключам
# Убедитесь, что вы создали ключи и добавили их в файл /home/landing/.ssh/authorized_keys
# Не забудьте перезапустить sshd после изменения конфигурации
# sudo systemctl restart sshd   


PermitRootLogin no
PasswordAuthentication no
PubkeyAuthentication yes
ChallengeResponseAuthentication no 
UsePAM no
```


И после уже 